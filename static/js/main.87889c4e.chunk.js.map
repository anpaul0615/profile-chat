{"version":3,"sources":["lib/cognito-client.js","lib/mqtt-client.js","lib/policy-manager.js","lib/index.js","components/ChatSignin/index.js","components/ChatSignin/SigninForm.js","lib/apigateway-client.js","lib/sigV4Client.js","components/ChatSignup/index.js","components/ChatSignup/SignupForm.js","components/Chat/index.js","components/ChatGroup/index.js","components/Chat/Body/MessageHistory/Message.js","components/Chat/Body/MessageHistory/MoreButton.js","components/Chat/Body/MessageHistory/index.js","components/Chat/Body/MessageInputBox/InputBox.js","components/Chat/Body/MessageInputBox/SendButton.js","components/Chat/Body/MessageInputBox/index.js","components/Chat/Body/index.js","components/Chat/Header/ChatGroupButton.js","components/Chat/Header/AppExitButton.js","components/Chat/Header/index.js","components/ChatGroup/Body/GroupList/GroupListItem.js","components/ChatGroup/Body/GroupList/index.js","components/ChatGroup/Body/index.js","components/ChatGroup/Header/CloseButton.js","components/ChatGroup/Header/index.js","components/LoadingCircle/index.js","App.js","serviceWorker.js","index.js"],"names":["CognitoClient","globalConfig","Object","classCallCheck","this","userPool","CognitoIdentity","UserPoolId","COGNITO_CONFIG","ClientId","_this","Promise","resolve","reject","cognitoUser","username","Error","_this2","credentials","_this3","idToken","cognitoUserSession","getIdToken","getJwtToken","providerKey","concat","endpoint","cognitoCredentials","AWS","IdentityPoolId","Logins","defineProperty","refresh","err","_this4","getCurrentUser","getSession","signInUserSession","userName","password","_this5","Username","Pool","authenticationDetails","Password","authenticateUser","onSuccess","onFailure","email","_this6","split","attributeList","Name","Value","signUp","result","user","getUsername","signOut","storage","length","clear","MQTTClient","clientId","mqtt","end","AWSIoTDeviceSDK","device","region","IOT_CONFIG","host","protocol","maximumReconnectTimeMs","accessKeyId","secretKey","secretAccessKey","sessionToken","on","topic","messageChunk","recieveMessageCallback","toString","callback","message","publish","subscribe","granted","unsubscribe","PolicyManager","iotClient","policyName","principal","config","update","attachPrincipalPolicy","data","__webpack_require__","d","__webpack_exports__","apigwClient","cognitoClient","mqttClient","poilcyManager","AWS_COMMON_CONFIG","APIGatewayClient","ChatSigninWrapper","styled","div","_templateObject","ChatSignin","props","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","checkPreviousSessionData","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","currentUser","currentGroup","wrap","_context","prev","next","libs","setUserSessionFromStorage","updateCredentials","getCredentials","sent","getUserName","setGlobalState","isPending","attachIotPolicy","identityId","checkMessageGroup","createMessageGroup","currentPage","t0","stop","attachUserIdentityToPolicy","groupId","invokeAPIGateway","path","method","queryParams","then","catch","body","groupName","groupUsers","handleInputEmail","event","target","value","setState","handleInputPassword","handleSignin","_callee2","_this$state","_context2","state","clearStorage","setUserSessionByAuthentication","global","window","alert","handleMoveSignupPage","_callee3","_context3","getGlobalState","react__WEBPACK_IMPORTED_MODULE_8___default","createElement","_SigninForm__WEBPACK_IMPORTED_MODULE_10__","React","Component","SigninFormWrapper","MessageButton","span","_templateObject2","SigninForm","react__WEBPACK_IMPORTED_MODULE_1___default","semantic_ui_react__WEBPACK_IMPORTED_MODULE_4__","textAlign","style","height","verticalAlign","Column","maxWidth","semantic_ui_react__WEBPACK_IMPORTED_MODULE_5__","as","color","semantic_ui_react__WEBPACK_IMPORTED_MODULE_6__","size","semantic_ui_react__WEBPACK_IMPORTED_MODULE_7__","Input","icon","iconPosition","fluid","placeholder","onChange","type","semantic_ui_react__WEBPACK_IMPORTED_MODULE_8__","onClick","semantic_ui_react__WEBPACK_IMPORTED_MODULE_9__","headers","Date","now","expireTime","client","sigV4Client","newClient","accessKey","APIGATEWAY_CONFIG","signedRequest","signRequest","signedBody","JSON","stringify","signedHeaders","fetch","url","results","status","text","json","util","URL","AWS_SHA_256","AWS4_REQUEST","AWS4","hash","SHA256","hexEncode","encHex","hmac","secret","HmacSHA256","asBytes","buildCanonicalQueryString","keys","sortedQueryParams","forEach","key","push","sort","canonicalQueryString","encodeURIComponent","substr","buildCanonicalSignedHeaders","sortedKeys","toLowerCase","join","buildCanonicalRequest","payload","uri","encodeURI","canonicalHeaders","buildCanonicalHeaders","awsSigV4Client","undefined","serviceName","defaultAcceptType","defaultContentType","invokeUrl","exec","pathComponent","substring","request","verb","toUpperCase","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","Accept","datetime","toISOString","replace","parser","parse","hostname","hashedCanonicalRequest","hashCanonicalRequest","credentialScope","service","buildCredentialScope","stringToSign","buildStringToSign","signature","calculateSignature","calculateSigningKey","buildAuthorizationHeader","queryString","ChatSignupWrapper","ChatSignup","handleSignup","passwordConfirm","test","registerNewAccount","handleInputPasswordConfirm","handleMoveSigninPage","_SignupForm__WEBPACK_IMPORTED_MODULE_10__","SignupFormWrapper","SignupForm","ChatWrapper","Chat","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__","initMessages","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","_ref2","messageHistory","messages","startDate","endtDate","limit","map","e","isMine","content","regDate","reverse","moveMessageHistoryScollToBottom","initMessageSubscribe","_ref4","init","registerMessageCallback","handleRecievedMessage","initMessageHistoryScoll","el","messageHistoryScrollDiv","scrollIntoView","handleSignout","confirm","signout","disconnect","parent","postMessage","newMessage","prevState","C_Users_PAUL_Desktop_workspace_profile_chat_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","handleInputMessage","messageBuffer","handleSendMessage","_callee4","_ref7","messageBody","_context4","abrupt","handleSendMessageShortcut","keyCode","ctrlKey","_callee5","_context5","handleGetOlderMessages","_callee6","lastMessage","lastMessageTime","_ref10","olderMessages","_context6","getTime","endDate","document","addEventListener","removeEventListener","react__WEBPACK_IMPORTED_MODULE_9___default","_Header__WEBPACK_IMPORTED_MODULE_11__","handleClickAppExitButton","handleClickOpenChatGroupButton","_Body__WEBPACK_IMPORTED_MODULE_12__","ChatGroupWrapper","ChatGroup","initChatGroups","_ref3","chatGroups","handleCloseChatGroupPage","handleChangeCurrentChatGroup","_ref5","changeGroup","_ref6","_x","apply","arguments","_Header__WEBPACK_IMPORTED_MODULE_10__","handleClickCloseChatGroupButton","_Body__WEBPACK_IMPORTED_MODULE_11__","handleClickChatGroup","MessageRawWrapper","MessageBalloonWrapper","Message","react_default","MoreButtonWrapper","MoreButton_templateObject","TextButton","MoreButton_templateObject2","MoreButton","MessageHistoryWrapper","MessageHistory_templateObject","ScrollWrapper","MessageHistory_templateObject2","MessageHistory","innerRef","MessageHistory_MoreButton","idx","MessageHistory_Message","InputBoxWrapper","textarea","InputBox_templateObject","InputBox","handleChangeInputText","SendButtonWrapper","SendButton_templateObject","SendButton","handleClickMessageSendButton","MessageInputBoxWrapper","MessageInputBox_templateObject","MessageInputBox","MessageInputBox_InputBox","MessageInputBox_SendButton","ChatBodyWrapper","Body_templateObject","ChatBody","Body_MessageHistory","Body_MessageInputBox","ChatGroupButtonWrapper","ChatGroupButton","AppExitButtonWrapper","AppExitButton_templateObject","AppExitButton","ChatHeaderWrapper","Header_templateObject","ChatHeader","Header_ChatGroupButton","Header_AppExitButton","ChatGroupListItemWrapper","GroupName","LastMessage","_templateObject3","ChatGroupListItem","defaultProps","ChatGroupListWrapper","GroupList_templateObject","ChatGroupList","group","GroupListItem","groupNickName","groupnickname","ChatGroupBodyWrapper","ChatGroupBody","GroupList","CloseButtonWrapper","CloseButton","ChatGroupHeaderWrapper","ChatGroupHeader","Header_CloseButton","LoadingCircleWrapper","LoadingCircle","Loader","active","App","possibleConstructorReturn","getPrototypeOf","newState","objectSpread","className","components_LoadingCircle","Boolean","location","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.87889c4e.chunk.js","sourcesContent":["import * as AWS from 'aws-sdk';\r\nimport * as CognitoIdentity from 'amazon-cognito-identity-js';\r\nimport COGNITO_CONFIG from '../configs/aws.cognito.json';\r\n\r\nexport default class CognitoClient {\r\n  constructor(globalConfig) {\r\n    this.globalConfig = globalConfig;\r\n    this.userPool = new CognitoIdentity.CognitoUserPool({\r\n      UserPoolId: COGNITO_CONFIG.UserPoolId,\r\n      ClientId: COGNITO_CONFIG.ClientId,\r\n    });\r\n  }\r\n\r\n  getUserName() {\r\n    return new Promise((resolve, reject) => {\r\n      if (!this.cognitoUser) return reject(new Error('Empty Session Data..!'));\r\n      return resolve(this.cognitoUser.username);\r\n    });\r\n  }\r\n\r\n  getCredentials() {\r\n    return new Promise(resolve => resolve(this.globalConfig.credentials));\r\n  }\r\n\r\n  updateCredentials() {\r\n    return new Promise((resolve, reject) => {\r\n      const idToken = this.cognitoUserSession.getIdToken().getJwtToken();\r\n      const providerKey = `${COGNITO_CONFIG.endpoint}/${COGNITO_CONFIG.UserPoolId}`;\r\n      const cognitoCredentials = new AWS.CognitoIdentityCredentials({\r\n        IdentityPoolId: COGNITO_CONFIG.IdentityPoolId,\r\n        Logins: {\r\n          [providerKey]: idToken,\r\n        },\r\n      });\r\n      // Set Cognito Credentials\r\n      this.globalConfig.credentials = cognitoCredentials;\r\n      this.globalConfig.credentials.refresh((err) => {\r\n        if (err) return reject(err);\r\n        return resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  setUserSessionFromStorage() {\r\n    return new Promise((resolve, reject) => {\r\n      // Check Previous-Session-Data Form Cognito-Storage (Localstorage/Cookie)\r\n      this.cognitoUser = this.userPool.getCurrentUser();\r\n      // Get Cognito-Session From Cognito-Storage\r\n      this.cognitoUser.getSession((err, signInUserSession) => {\r\n        if (err) return reject(err);\r\n        this.cognitoUserSession = signInUserSession;\r\n        return resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  setUserSessionByAuthentication(userName, password) {\r\n    return new Promise((resolve, reject) => {\r\n      // Init CognitoUser\r\n      this.cognitoUser = new CognitoIdentity.CognitoUser({\r\n        Username: userName,\r\n        Pool: this.userPool,\r\n      });\r\n      // Init AuthenticationDetails\r\n      const authenticationDetails = new CognitoIdentity.AuthenticationDetails({\r\n        Username: userName,\r\n        Password: password,\r\n      });\r\n      // Authenticate Cognito User\r\n      this.cognitoUser.authenticateUser(authenticationDetails, {\r\n        onSuccess: (cognitoUserSession) => {\r\n          this.cognitoUserSession = cognitoUserSession;\r\n          resolve(cognitoUserSession);\r\n        },\r\n        onFailure: err => reject(err),\r\n      });\r\n    });\r\n  }\r\n\r\n  registerNewAccount(email, password) {\r\n    return new Promise((resolve, reject) => {\r\n      // Set Attributes\r\n      const userName = email.split('@')[0];\r\n      const attributeList = [\r\n        new CognitoIdentity.CognitoUserAttribute({\r\n          Name: 'email',\r\n          Value: email,\r\n        }),\r\n        new CognitoIdentity.CognitoUserAttribute({\r\n          Name: 'name',\r\n          Value: userName,\r\n        }),\r\n      ];\r\n      this.userPool.signUp(userName, password, attributeList, null, (err, result) => {\r\n        if (err) return reject(err);\r\n        return resolve({ userName: result.user.getUsername() });\r\n      });\r\n    });\r\n  }\r\n\r\n  signout() {\r\n    this.cognitoUser.signOut();\r\n  }\r\n\r\n  clearStorage() {\r\n    if (this.userPool.storage.length !== 0) {\r\n      this.userPool.storage.clear();\r\n    }\r\n  }\r\n}\r\n","import AWSIoTDeviceSDK from 'aws-iot-device-sdk';\r\nimport IOT_CONFIG from '../configs/aws.iot.json';\r\n\r\nexport default class MQTTClient {\r\n  constructor(globalConfig) {\r\n    this.globalConfig = globalConfig;\r\n  }\r\n\r\n  init(clientId) {\r\n    if (this.mqtt) {\r\n      this.mqtt.end();\r\n      delete this.mqtt;\r\n    }\r\n    this.mqtt = AWSIoTDeviceSDK.device({\r\n      region: IOT_CONFIG.region,\r\n      host: IOT_CONFIG['profile-chat'].endpoint,\r\n      clientId,\r\n      protocol: 'wss',\r\n      maximumReconnectTimeMs: 5000,\r\n      // debug: true,\r\n      accessKeyId: this.globalConfig.credentials.accessKeyId,\r\n      secretKey: this.globalConfig.credentials.secretAccessKey,\r\n      sessionToken: this.globalConfig.credentials.sessionToken,\r\n    });\r\n    this.mqtt.on('connect', () => {\r\n      // console.log('mqtt#connect..');\r\n    });\r\n    this.mqtt.on('reconnect', () => {\r\n      // console.log('mqtt#reconnect..');\r\n    });\r\n    this.mqtt.on('offline', () => {\r\n      // console.log('mqtt#offline..');\r\n    });\r\n    this.mqtt.on('error', () => {\r\n      // console.log('mqtt#error..');\r\n    });\r\n    this.mqtt.on('message', (topic, messageChunk) => {\r\n      // console.log('mqtt#message..');\r\n      this.recieveMessageCallback(messageChunk.toString());\r\n    });\r\n  }\r\n\r\n  registerMessageCallback(callback) {\r\n    if (this.recieveMessageCallback) {\r\n      delete this.recieveMessageCallback;\r\n    }\r\n    this.recieveMessageCallback = callback;\r\n  }\r\n\r\n  publish(topic, message) {\r\n    return new Promise((resolve, reject) => {\r\n      this.mqtt.publish(topic, message, null, (err) => {\r\n        if (err) reject(err);\r\n        else resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  subscribe(topic) {\r\n    return new Promise((resolve, reject) => {\r\n      this.mqtt.subscribe(topic, null, (err, granted) => {\r\n        if (err) reject(err);\r\n        else resolve(granted);\r\n      });\r\n    });\r\n  }\r\n\r\n  unsubscribe(topic) {\r\n    return new Promise((resolve, reject) => {\r\n      this.mqtt.unsubscribe(topic, (err) => {\r\n        if (err) reject(err);\r\n        else resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  disconnect() {\r\n    this.mqtt.end();\r\n  }\r\n}\r\n","import * as AWS from 'aws-sdk';\nimport IOT_CONFIG from '../configs/aws.iot.json';\n\nexport default class PolicyManager {\n  constructor(globalConfig) {\n    this.iotClient = new AWS.Iot();\n    this.globalConfig = globalConfig;\n  }\n\n  async attachUserIdentityToPolicy(policyName, principal) {\n    this.iotClient.config.update({\n      credentials: this.globalConfig.credentials,\n      region: IOT_CONFIG.region,\n      endpoint: IOT_CONFIG.endpoint,\n    });\n    return new Promise((resolve, reject) => {\n      this.iotClient.attachPrincipalPolicy({ policyName, principal }, (err, data) => {\n        if (err) return reject(err);\n        return resolve(data);\n      });\n    });\n  }\n}\n","import * as AWS from 'aws-sdk';\r\nimport AWS_COMMON_CONFIG from '../configs/aws.common.json';\r\n\r\nimport CognitoClient from './cognito-client';\r\nimport MQTTClient from './mqtt-client';\r\nimport PolicyManager from './policy-manager';\r\nimport APIGatewayClient from './apigateway-client';\r\n\r\nAWS.config.update({\r\n  region: AWS_COMMON_CONFIG.region,\r\n});\r\n\r\nexport const apigwClient = new APIGatewayClient(AWS.config);\r\nexport const cognitoClient = new CognitoClient(AWS.config);\r\nexport const mqttClient = new MQTTClient(AWS.config);\r\nexport const poilcyManager = new PolicyManager(AWS.config);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport SigninForm from './SigninForm';\r\nimport * as libs from '../../lib';\r\n\r\n/* Style-Wrapper */\r\nconst ChatSigninWrapper = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  background: rgba(0,0,0,0.6);\r\n`;\r\n/* Component */\r\nclass ChatSignin extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { getGlobalState, setGlobalState } = props;\r\n    this.getGlobalState = getGlobalState;\r\n    this.setGlobalState = setGlobalState;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.checkPreviousSessionData();\r\n  }\r\n\r\n  checkPreviousSessionData = async () => {\r\n    try {\r\n      // Get Credentials From Previous Session Data\r\n      await libs.cognitoClient.setUserSessionFromStorage();\r\n      await libs.cognitoClient.updateCredentials();\r\n      const cognitoCredentials = await libs.cognitoClient.getCredentials();\r\n      const userName = await libs.cognitoClient.getUserName();\r\n      // Set Pending State To Start\r\n      await this.setGlobalState({\r\n        isPending: true,\r\n      });\r\n      // Attach IoT Principal Policy\r\n      await this.attachIotPolicy(cognitoCredentials.identityId);\r\n      // Check Message Group\r\n      const currentUser = userName;\r\n      const currentGroup = currentUser;\r\n      if (!await this.checkMessageGroup(currentGroup)) {\r\n        await this.createMessageGroup(currentGroup, currentUser);\r\n      }\r\n      // Update State\r\n      await this.setGlobalState({\r\n        isPending: false,\r\n        currentPage: '/',\r\n        currentUser,\r\n        currentGroup,\r\n      });\r\n    } catch (e) {\r\n      // console.log(e);\r\n    }\r\n  }\r\n\r\n  attachIotPolicy = identityId => libs.poilcyManager.attachUserIdentityToPolicy('iot-chat-policy', identityId);\r\n\r\n  checkMessageGroup = groupId => libs.apigwClient.invokeAPIGateway({\r\n    path: '/messages/group',\r\n    method: 'GET',\r\n    queryParams: { groupId },\r\n  }).then(() => true).catch(() => false);\r\n\r\n  createMessageGroup = (groupId, userName) => libs.apigwClient.invokeAPIGateway({\r\n    path: '/messages/group',\r\n    method: 'POST',\r\n    body: {\r\n      groupId,\r\n      groupName: userName,\r\n      groupUsers: [userName, 'anpaul0615'],\r\n    },\r\n  });\r\n\r\n  handleInputEmail = (event) => {\r\n    const email = event.target.value;\r\n    this.setState(() => ({\r\n      email,\r\n    }));\r\n  }\r\n\r\n  handleInputPassword = (event) => {\r\n    const password = event.target.value;\r\n    this.setState(() => ({\r\n      password,\r\n    }));\r\n  }\r\n\r\n  handleSignin = async () => {\r\n    try {\r\n      // Extract User Name\r\n      const { email, password } = this.state;\r\n      const userName = email.split('@')[0];\r\n      // Clear Cognito Storage\r\n      libs.cognitoClient.clearStorage();\r\n      // Get Cognito Credentials\r\n      await libs.cognitoClient.setUserSessionByAuthentication(userName, password);\r\n      await libs.cognitoClient.updateCredentials();\r\n      const cognitoCredentials = await libs.cognitoClient.getCredentials();\r\n      // Set Pending State To Start\r\n      await this.setGlobalState({\r\n        isPending: true,\r\n      });\r\n      // Attach IoT Principal Policy\r\n      await this.attachIotPolicy(cognitoCredentials.identityId);\r\n      // Check Message Group\r\n      const currentUser = userName;\r\n      const currentGroup = currentUser;\r\n      if (!await this.checkMessageGroup(currentGroup)) {\r\n        await this.createMessageGroup(currentGroup, currentUser);\r\n      }\r\n      // Update State\r\n      await this.setGlobalState({\r\n        isPending: false,\r\n        currentPage: '/',\r\n        currentUser,\r\n        currentGroup,\r\n      });\r\n    } catch (e) {\r\n      // console.log(e);\r\n      global.window.alert(e.message || e);\r\n    }\r\n  }\r\n\r\n  handleMoveSignupPage = async () => {\r\n    await this.setGlobalState({\r\n      currentPage: '/signup',\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ChatSigninWrapper>\r\n        <SigninForm\r\n          handleInputEmail={this.handleInputEmail}\r\n          handleInputPassword={this.handleInputPassword}\r\n          handleSignin={this.handleSignin}\r\n          handleMoveSignupPage={this.handleMoveSignupPage}\r\n        />\r\n      </ChatSigninWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nChatSignin.propTypes = {\r\n  getGlobalState: PropTypes.func.isRequired,\r\n  setGlobalState: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ChatSignin;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport {\r\n  Button, Form, Grid, Header, Segment, Message,\r\n} from 'semantic-ui-react';\r\n\r\n/* Style-Wrapper */\r\nconst SigninFormWrapper = styled.div`\r\n  max-width: 500px;\r\n  max-height: 440px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n  top: 30%;\r\n  border-radius: 8px;\r\n  background-color: transparent;\r\n  background: rgba(255,255,255,1);\r\n`;\r\nconst MessageButton = styled.span`\r\n  color: #4183c4;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n`;\r\n/* Component */\r\nconst SigninForm = (props) => {\r\n  const {\r\n    handleInputEmail, handleInputPassword,\r\n    handleSignin, handleMoveSignupPage,\r\n  } = props;\r\n  return (\r\n    <SigninFormWrapper>\r\n      <Grid textAlign=\"center\" style={{ height: '100%' }} verticalAlign=\"middle\">\r\n        <Grid.Column style={{ maxWidth: 450 }}>\r\n          <Header as=\"h2\" color=\"grey\" textAlign=\"center\">\r\n            Log-in to your account\r\n          </Header>\r\n          <Form size=\"large\">\r\n            <Segment>\r\n              <Form.Input\r\n                icon=\"user\"\r\n                iconPosition=\"left\"\r\n                fluid\r\n                placeholder=\"E-mail address\"\r\n                onChange={handleInputEmail}\r\n              />\r\n              <Form.Input\r\n                icon=\"lock\"\r\n                iconPosition=\"left\"\r\n                fluid\r\n                placeholder=\"Password\"\r\n                type=\"password\"\r\n                onChange={handleInputPassword}\r\n              />\r\n              <Button\r\n                color=\"blue\"\r\n                size=\"large\"\r\n                fluid\r\n                onClick={handleSignin}\r\n              >\r\n                Signin\r\n              </Button>\r\n            </Segment>\r\n            <Message>\r\n              New to here? &nbsp;\r\n              <MessageButton onClick={handleMoveSignupPage}>\r\n                Sign Up\r\n              </MessageButton>\r\n            </Message>\r\n          </Form>\r\n        </Grid.Column>\r\n      </Grid>\r\n    </SigninFormWrapper>\r\n  );\r\n};\r\n\r\nSigninForm.propTypes = {\r\n  handleInputEmail: PropTypes.func.isRequired,\r\n  handleInputPassword: PropTypes.func.isRequired,\r\n  handleSignin: PropTypes.func.isRequired,\r\n  handleMoveSignupPage: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SigninForm;\r\n","import APIGATEWAY_CONFIG from '../configs/aws.apigateway.json';\r\nimport sigV4Client from './sigV4Client';\r\n\r\nexport default class APIGatewayClient {\r\n  constructor(globalConfig) {\r\n    this.globalConfig = globalConfig;\r\n  }\r\n\r\n  async invokeAPIGateway({\r\n    path = '/', method = 'GET', headers = {}, queryParams = {}, body,\r\n  }) {\r\n    if (!this.globalConfig.credentials) {\r\n      throw new Error('User is not logged in..!');\r\n    }\r\n    if (Date.now() > this.globalConfig.credentials.expireTime - 60000) {\r\n      throw new Error('Expired-time is nearby..!');\r\n    }\r\n\r\n    const client = sigV4Client.newClient({\r\n      accessKey: this.globalConfig.credentials.accessKeyId,\r\n      secretKey: this.globalConfig.credentials.secretAccessKey,\r\n      sessionToken: this.globalConfig.credentials.sessionToken,\r\n      region: APIGATEWAY_CONFIG.region,\r\n      endpoint: APIGATEWAY_CONFIG['profile-chat'].endpoint,\r\n    });\r\n\r\n    const signedRequest = client.signRequest({\r\n      method,\r\n      path,\r\n      headers,\r\n      queryParams,\r\n      body,\r\n    });\r\n\r\n    const signedBody = body ? JSON.stringify(body) : body;\r\n    const signedHeaders = signedRequest.headers;\r\n\r\n    const results = await global.fetch(signedRequest.url, {\r\n      method,\r\n      headers: signedHeaders,\r\n      body: signedBody,\r\n    });\r\n\r\n    if (results.status !== 200) {\r\n      throw new Error(await results.text());\r\n    }\r\n\r\n    return results.json();\r\n  }\r\n}\r\n","import SHA256 from 'crypto-js/sha256';\nimport encHex from 'crypto-js/enc-hex';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\nimport URL from 'url';\n\nconst sigV4Client = {};\n\n/* IE11 URL Polyfill */\nsigV4Client.util = {\n  URL,\n};\n\nsigV4Client.newClient = (config) => {\n  const AWS_SHA_256 = 'AWS4-HMAC-SHA256';\n  const AWS4_REQUEST = 'aws4_request';\n  const AWS4 = 'AWS4';\n  const X_AMZ_DATE = 'x-amz-date';\n  const X_AMZ_SECURITY_TOKEN = 'x-amz-security-token';\n  const HOST = 'host';\n  const AUTHORIZATION = 'Authorization';\n\n  function hash(value) {\n    return SHA256(value); // eslint-disable-line\n  }\n\n  function hexEncode(value) {\n    return value.toString(encHex);\n  }\n\n  function hmac(secret, value) {\n    return HmacSHA256(value, secret, { asBytes: true }); // eslint-disable-line\n  }\n\n  function buildCanonicalUri(uri) {\n    return encodeURI(uri);\n  }\n\n  function buildCanonicalQueryString(queryParams) {\n    if (Object.keys(queryParams).length < 1) {\n      return '';\n    }\n\n    const sortedQueryParams = [];\n    Object.keys(queryParams).forEach((key) => {\n      sortedQueryParams.push(key);\n    });\n    sortedQueryParams.sort();\n\n    let canonicalQueryString = '';\n    sortedQueryParams.forEach((key) => {\n      canonicalQueryString += `${key}=${encodeURIComponent(queryParams[key])}&`;\n    });\n    return canonicalQueryString.substr(0, canonicalQueryString.length - 1);\n  }\n\n  function buildCanonicalHeaders(headers) {\n    const sortedKeys = [];\n    Object.keys(headers).forEach((key) => {\n      sortedKeys.push(key);\n    });\n    sortedKeys.sort();\n\n    let canonicalHeaders = '';\n    sortedKeys.forEach((key) => {\n      canonicalHeaders += `${key.toLowerCase()}:${headers[key]}\\n`;\n    });\n    return canonicalHeaders;\n  }\n\n  function buildCanonicalSignedHeaders(headers) {\n    const sortedKeys = [];\n    Object.keys(headers).forEach((key) => {\n      sortedKeys.push(key.toLowerCase());\n    });\n    sortedKeys.sort();\n    return sortedKeys.join(';');\n  }\n\n  function buildCanonicalRequest(method, path, queryParams, headers, payload) {\n    return [\n      method,\n      buildCanonicalUri(path),\n      buildCanonicalQueryString(queryParams),\n      buildCanonicalHeaders(headers),\n      buildCanonicalSignedHeaders(headers),\n      hexEncode(hash(payload)),\n    ].join('\\n');\n  }\n\n  function hashCanonicalRequest(request) {\n    return hexEncode(hash(request));\n  }\n\n  function buildStringToSign(datetime, credentialScope, hashedCanonicalRequest) {\n    return `${AWS_SHA_256}\\n${datetime}\\n${credentialScope}\\n${hashedCanonicalRequest}`;\n  }\n\n  function buildCredentialScope(datetime, region, service) {\n    return `${datetime.substr(0, 8)}/${region}/${service}/${AWS4_REQUEST}`;\n  }\n\n  function calculateSigningKey(secretKey, datetime, region, service) {\n    return hmac(\n      hmac(\n        hmac(hmac(AWS4 + secretKey, datetime.substr(0, 8)), region),\n        service,\n      ),\n      AWS4_REQUEST,\n    );\n  }\n\n  function calculateSignature(key, stringToSign) {\n    return hexEncode(hmac(key, stringToSign));\n  }\n\n  function buildAuthorizationHeader(accessKey, credentialScope, headers, signature) {\n    return `${AWS_SHA_256} Credential=${accessKey}/${credentialScope}, SignedHeaders=${buildCanonicalSignedHeaders(headers)}, Signature=${signature}`;\n  }\n\n  const awsSigV4Client = {};\n  if (config.accessKey === undefined || config.secretKey === undefined) {\n    return awsSigV4Client;\n  }\n  awsSigV4Client.accessKey = config.accessKey;\n  awsSigV4Client.secretKey = config.secretKey;\n  awsSigV4Client.sessionToken = config.sessionToken;\n  awsSigV4Client.serviceName = config.serviceName || 'execute-api';\n  awsSigV4Client.region = config.region || 'us-east-1';\n  awsSigV4Client.defaultAcceptType = config.defaultAcceptType || 'application/json';\n  awsSigV4Client.defaultContentType = config.defaultContentType || 'application/json';\n\n  const invokeUrl = config.endpoint;\n  const endpoint = /(^https?:\\/\\/[^/]+)/g.exec(invokeUrl)[1];\n  const pathComponent = invokeUrl.substring(endpoint.length);\n\n  awsSigV4Client.endpoint = endpoint;\n  awsSigV4Client.pathComponent = pathComponent;\n\n  awsSigV4Client.signRequest = (request) => {\n    const verb = request.method.toUpperCase();\n    const path = awsSigV4Client.pathComponent + request.path;\n    const queryParams = { ...request.queryParams };\n    const headers = { ...request.headers };\n\n    // If the user has not specified an override for Content type the use default\n    if (headers['Content-Type'] === undefined) {\n      headers['Content-Type'] = awsSigV4Client.defaultContentType;\n    }\n\n    // If the user has not specified an override for Accept type the use default\n    if (headers.Accept === undefined) {\n      headers.Accept = awsSigV4Client.defaultAcceptType;\n    }\n\n    let body = { ...request.body };\n    // override request body and set to empty when signing GET requests\n    if (request.body === undefined || verb === 'GET') {\n      body = '';\n    } else {\n      body = JSON.stringify(body);\n    }\n\n    // If there is no body remove the content-type header so it is not\n    // included in SigV4 calculation\n    if (body === '' || body === undefined || body === null) {\n      delete headers['Content-Type'];\n    }\n\n    const datetime = new Date()\n      .toISOString()\n      .replace(/\\.\\d{3}Z$/, 'Z')\n      .replace(/[:-]|\\.\\d{3}/g, '');\n    headers[X_AMZ_DATE] = datetime;\n\n    /* IE11 URL Polyfill */\n    const parser = sigV4Client.util.URL.parse(awsSigV4Client.endpoint);\n    headers[HOST] = parser.hostname;\n    // const parser = new URL(awsSigV4Client.endpoint);\n    // headers[HOST] = parser.hostname;\n\n    const canonicalRequest = buildCanonicalRequest(\n      verb,\n      path,\n      queryParams,\n      headers,\n      body,\n    );\n    const hashedCanonicalRequest = hashCanonicalRequest(canonicalRequest);\n    const credentialScope = buildCredentialScope(\n      datetime,\n      awsSigV4Client.region,\n      awsSigV4Client.serviceName,\n    );\n    const stringToSign = buildStringToSign(\n      datetime,\n      credentialScope,\n      hashedCanonicalRequest,\n    );\n    const signingKey = calculateSigningKey(\n      awsSigV4Client.secretKey,\n      datetime,\n      awsSigV4Client.region,\n      awsSigV4Client.serviceName,\n    );\n    const signature = calculateSignature(signingKey, stringToSign);\n    headers[AUTHORIZATION] = buildAuthorizationHeader(\n      awsSigV4Client.accessKey,\n      credentialScope,\n      headers,\n      signature,\n    );\n    if (awsSigV4Client.sessionToken !== undefined\n      && awsSigV4Client.sessionToken !== '') {\n      headers[X_AMZ_SECURITY_TOKEN] = awsSigV4Client.sessionToken;\n    }\n    delete headers[HOST];\n\n    let url = awsSigV4Client.endpoint + path;\n    const queryString = buildCanonicalQueryString(queryParams);\n    if (queryString !== '') {\n      url += `?${queryString}`;\n    }\n\n    // Need to re-attach Content-Type if it is not specified at this point\n    if (headers['Content-Type'] === undefined) {\n      headers['Content-Type'] = awsSigV4Client.defaultContentType;\n    }\n\n    return {\n      headers,\n      url,\n    };\n  };\n\n  return awsSigV4Client;\n};\n\nexport default sigV4Client;\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport SignupForm from './SignupForm';\r\nimport * as libs from '../../lib';\r\n\r\n/* Style-Wrapper */\r\nconst ChatSignupWrapper = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  background: rgba(0,0,0,0.6);\r\n`;\r\n/* Component */\r\nclass ChatSignup extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { getGlobalState, setGlobalState } = props;\r\n    this.getGlobalState = getGlobalState;\r\n    this.setGlobalState = setGlobalState;\r\n  }\r\n\r\n  attachIotPolicy = identityId => libs.poilcyManager.attachUserIdentityToPolicy('iot-chat-policy', identityId);\r\n\r\n  checkMessageGroup = groupId => libs.apigwClient.invokeAPIGateway({\r\n    path: '/messages/group',\r\n    method: 'GET',\r\n    queryParams: { groupId },\r\n  }).then(() => true).catch(() => false);\r\n\r\n  createMessageGroup = (groupId, userName) => libs.apigwClient.invokeAPIGateway({\r\n    path: '/messages/group',\r\n    method: 'POST',\r\n    body: {\r\n      groupId,\r\n      groupName: userName,\r\n      groupUsers: [userName, 'anpaul0615'],\r\n    },\r\n  });\r\n\r\n  handleSignup = async () => {\r\n    try {\r\n      const { email, password, passwordConfirm } = this.state;\r\n      if (!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/.test(email)) {\r\n        global.window.alert('Email Format is Invalid..!');\r\n      } else if (password !== passwordConfirm) {\r\n        global.window.alert('Password Confirm is not matched..!');\r\n      } else {\r\n        // Get Cognito Credentials\r\n        await libs.cognitoClient.registerNewAccount(email, password);\r\n        // Notify Success to User\r\n        global.window.alert('Confirmation code was sent to your email!!');\r\n        // Go To Signin Page\r\n        await this.setGlobalState({\r\n          currentPage: '/signin',\r\n        });\r\n      }\r\n    } catch (e) {\r\n      // console.log(e);\r\n      global.window.alert(e.message || e);\r\n    }\r\n  }\r\n\r\n  handleInputEmail = (event) => {\r\n    const email = event.target.value;\r\n    this.setState(() => ({\r\n      email,\r\n    }));\r\n  }\r\n\r\n  handleInputPassword = (event) => {\r\n    const password = event.target.value;\r\n    this.setState(() => ({\r\n      password,\r\n    }));\r\n  }\r\n\r\n  handleInputPasswordConfirm = (event) => {\r\n    const passwordConfirm = event.target.value;\r\n    this.setState(() => ({\r\n      passwordConfirm,\r\n    }));\r\n  }\r\n\r\n  handleMoveSigninPage = async () => {\r\n    await this.setGlobalState({\r\n      currentPage: '/signin',\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ChatSignupWrapper>\r\n        <SignupForm\r\n          handleInputEmail={this.handleInputEmail}\r\n          handleInputPassword={this.handleInputPassword}\r\n          handleInputPasswordConfirm={this.handleInputPasswordConfirm}\r\n          handleSignup={this.handleSignup}\r\n          handleMoveSigninPage={this.handleMoveSigninPage}\r\n        />\r\n      </ChatSignupWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nChatSignup.propTypes = {\r\n  getGlobalState: PropTypes.func.isRequired,\r\n  setGlobalState: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ChatSignup;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport {\r\n  Button, Form, Grid, Header, Segment, Message,\r\n} from 'semantic-ui-react';\r\n\r\n/* Style-Wrapper */\r\nconst SignupFormWrapper = styled.div`\r\n  max-width: 500px;\r\n  max-height: 440px;\r\n  margin: 0 auto;\r\n  position: relative;\r\n  top: 30%;\r\n  border-radius: 8px;\r\n  background-color: transparent;\r\n  background: rgba(255,255,255,1);\r\n`;\r\nconst MessageButton = styled.span`\r\n  color: #4183c4;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n`;\r\n/* Component */\r\nconst SignupForm = (props) => {\r\n  const {\r\n    handleInputEmail, handleInputPassword, handleInputPasswordConfirm,\r\n    handleSignup, handleMoveSigninPage,\r\n  } = props;\r\n  return (\r\n    <SignupFormWrapper>\r\n      <Grid textAlign=\"center\" style={{ height: '100%' }} verticalAlign=\"middle\">\r\n        <Grid.Column style={{ maxWidth: 450 }}>\r\n          <Header as=\"h2\" color=\"grey\" textAlign=\"center\">\r\n            Create new account\r\n          </Header>\r\n          <Form size=\"large\">\r\n            <Segment>\r\n              <Form.Input\r\n                icon=\"user\"\r\n                iconPosition=\"left\"\r\n                fluid\r\n                placeholder=\"E-mail address\"\r\n                onChange={handleInputEmail}\r\n              />\r\n              <Form.Input\r\n                icon=\"lock\"\r\n                iconPosition=\"left\"\r\n                fluid\r\n                placeholder=\"Password\"\r\n                type=\"password\"\r\n                onChange={handleInputPassword}\r\n              />\r\n              <Form.Input\r\n                icon=\"lock\"\r\n                iconPosition=\"left\"\r\n                fluid\r\n                placeholder=\"Password Confirm\"\r\n                type=\"password\"\r\n                onChange={handleInputPasswordConfirm}\r\n              />\r\n              <Button\r\n                color=\"blue\"\r\n                size=\"large\"\r\n                fluid\r\n                onClick={handleSignup}\r\n              >\r\n                  Signup\r\n              </Button>\r\n            </Segment>\r\n            <Message>\r\n              Already be registered? &nbsp;\r\n              <MessageButton onClick={handleMoveSigninPage}>\r\n                Sign In\r\n              </MessageButton>\r\n            </Message>\r\n          </Form>\r\n        </Grid.Column>\r\n      </Grid>\r\n    </SignupFormWrapper>\r\n  );\r\n};\r\n\r\nSignupForm.propTypes = {\r\n  handleInputEmail: PropTypes.func.isRequired,\r\n  handleInputPassword: PropTypes.func.isRequired,\r\n  handleInputPasswordConfirm: PropTypes.func.isRequired,\r\n  handleSignup: PropTypes.func.isRequired,\r\n  handleMoveSigninPage: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SignupForm;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport ChatHeader from './Header';\r\nimport ChatBody from './Body';\r\nimport * as libs from '../../lib';\r\n\r\n/* Style-Wrapper */\r\nconst ChatWrapper = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n`;\r\n/* Component */\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { getGlobalState, setGlobalState } = props;\r\n    this.getGlobalState = getGlobalState;\r\n    this.setGlobalState = setGlobalState;\r\n    this.state = {\r\n      messageBuffer: '',\r\n      messages: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    global.window.document.addEventListener('keydown', this.handleSendMessageShortcut);\r\n    this.initMessages();\r\n    this.initMessageSubscribe();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    global.window.document.removeEventListener('keydown', this.handleSendMessageShortcut);\r\n  }\r\n\r\n  initMessages = async () => {\r\n    try {\r\n      // Set Pending State To Start\r\n      await this.setGlobalState({\r\n        isPending: true,\r\n      });\r\n      // Get All Message History\r\n      const { currentGroup, currentUser } = await this.getGlobalState();\r\n      const messageHistory = await libs.apigwClient.invokeAPIGateway({\r\n        path: '/messages',\r\n        method: 'GET',\r\n        queryParams: {\r\n          groupId: currentGroup,\r\n          startDate: '1000-01-01T00:00:00.000Z',\r\n          endtDate: new Date().toISOString(),\r\n          limit: 50,\r\n        },\r\n      }).then(result => result.data).catch(() => []);\r\n      // Parse Message History\r\n      const messages = messageHistory.map(e => ({\r\n        isMine: e.userName === currentUser,\r\n        userName: e.userName,\r\n        content: e.content,\r\n        regDate: e.regDate,\r\n      })).reverse();\r\n      this.setState(() => ({\r\n        messages,\r\n      }));\r\n      // Move Scroll To Bottom\r\n      this.moveMessageHistoryScollToBottom();\r\n      // Set Pending State To Finish\r\n      await this.setGlobalState({\r\n        isPending: false,\r\n      });\r\n    } catch (e) {\r\n      // console.log(e);\r\n    }\r\n  }\r\n\r\n  initMessageSubscribe = async () => {\r\n    try {\r\n      // Get Credentials From Previous Session Data\r\n      const cognitoCredentials = await libs.cognitoClient.getCredentials();\r\n      // Init MQTT Connection\r\n      const { currentGroup, currentUser } = await this.getGlobalState();\r\n      libs.mqttClient.init(cognitoCredentials, currentUser);\r\n      // Subscribe Message Group\r\n      await libs.mqttClient.subscribe(currentGroup);\r\n      libs.mqttClient.registerMessageCallback(this.handleRecievedMessage);\r\n    } catch (e) {\r\n      // console.log(e);\r\n    }\r\n  }\r\n\r\n  initMessageHistoryScoll = (el) => {\r\n    this.messageHistoryScrollDiv = el;\r\n  }\r\n\r\n  moveMessageHistoryScollToBottom = () => {\r\n    if (this.messageHistoryScrollDiv) {\r\n      this.messageHistoryScrollDiv.scrollIntoView(false);\r\n    }\r\n  }\r\n\r\n  handleSignout = async () => {\r\n    if (global.window.confirm('Signout Now?')) {\r\n      try {\r\n        libs.cognitoClient.signout();\r\n        libs.cognitoClient.clearStorage();\r\n        libs.mqttClient.disconnect();\r\n        await this.setGlobalState({\r\n          currentPage: '/signin',\r\n          currentUser: '',\r\n          currentGroup: '',\r\n        });\r\n        // Close Iframe Window\r\n        global.window.parent.postMessage('chat-off', '*');\r\n      } catch (e) {\r\n        // console.log(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleRecievedMessage = (messageChunk) => {\r\n    const newMessage = JSON.parse(messageChunk);\r\n    const { currentUser } = this.state;\r\n    newMessage.isMine = (newMessage.userName === currentUser);\r\n    this.setState(prevState => ({\r\n      messages: [...prevState.messages, newMessage],\r\n    }));\r\n    this.moveMessageHistoryScollToBottom();\r\n  }\r\n\r\n  handleInputMessage = (event) => {\r\n    const messageBuffer = event.target.value;\r\n    this.setState(() => ({\r\n      messageBuffer,\r\n    }));\r\n  }\r\n\r\n  handleSendMessage = async () => {\r\n    try {\r\n      const { messageBuffer } = this.state;\r\n      if (messageBuffer === '') return;\r\n      // Set Pending State To Start\r\n      this.setGlobalState({\r\n        isPending: true,\r\n      });\r\n      // Send Message to Database\r\n      const { currentGroup, currentUser } = await this.getGlobalState();\r\n      const messageBody = {\r\n        groupId: currentGroup,\r\n        regDate: new Date().toISOString(),\r\n        content: messageBuffer,\r\n        userName: currentUser,\r\n      };\r\n      await libs.apigwClient.invokeAPIGateway({\r\n        path: '/messages',\r\n        method: 'POST',\r\n        body: messageBody,\r\n      });\r\n      // Send Message to MQTT\r\n      await libs.mqttClient.publish(currentGroup, JSON.stringify(messageBody));\r\n      // Clear MessageBuffer\r\n      this.setState(() => ({\r\n        messageBuffer: '',\r\n      }));\r\n      // Set Pending State To Finish\r\n      this.setGlobalState({\r\n        isPending: false,\r\n      });\r\n      // Move Scroll To Bottom\r\n      this.moveMessageHistoryScollToBottom();\r\n    } catch (e) {\r\n      // console.log(e);\r\n    }\r\n  }\r\n\r\n  handleSendMessageShortcut = (event) => {\r\n    if (event.keyCode === 13 && event.ctrlKey) {\r\n      this.handleSendMessage();\r\n    }\r\n  }\r\n\r\n  handleMoveSignupPage = async () => {\r\n    await this.setGlobalState({\r\n      currentPage: '/group',\r\n    });\r\n  }\r\n\r\n  handleGetOlderMessages = async () => {\r\n    const { messages } = this.state;\r\n    if (messages.length !== 0) {\r\n      try {\r\n        // Set Pending State To Start\r\n        await this.setGlobalState({\r\n          isPending: true,\r\n        });\r\n        // Get Older Message History\r\n        const lastMessage = messages[0];\r\n        const lastMessageTime = new Date(lastMessage.regDate).getTime() - 1;\r\n        const { currentGroup, currentUser } = await this.getGlobalState();\r\n        const messageHistory = await libs.apigwClient.invokeAPIGateway({\r\n          path: '/messages',\r\n          method: 'GET',\r\n          queryParams: {\r\n            groupId: currentGroup,\r\n            startDate: '1000-01-01T00:00:00.000Z',\r\n            endDate: new Date(lastMessageTime).toISOString(),\r\n            limit: 50,\r\n          },\r\n        }).then(result => result.data).catch(() => []);\r\n        // Parse Message History\r\n        const olderMessages = (messageHistory || []).map(e => ({\r\n          isMine: e.userName === currentUser,\r\n          userName: e.userName,\r\n          content: e.content,\r\n          regDate: e.regDate,\r\n        })).reverse();\r\n        // Update Messages\r\n        this.setState(prevState => ({\r\n          messages: [...olderMessages, ...prevState.messages],\r\n        }));\r\n        // Set Pending State To Finish\r\n        await this.setGlobalState({\r\n          isPending: false,\r\n        });\r\n      } catch (e) {\r\n        // console.log(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { messageBuffer, messages } = this.state;\r\n    return (\r\n      <ChatWrapper>\r\n        <ChatHeader\r\n          handleClickAppExitButton={this.handleSignout}\r\n          handleClickOpenChatGroupButton={this.handleMoveSignupPage}\r\n        />\r\n        <ChatBody\r\n          messages={messages}\r\n          messageBuffer={messageBuffer}\r\n          initMessageHistoryScoll={this.initMessageHistoryScoll}\r\n          handleGetOlderMessages={this.handleGetOlderMessages}\r\n          handleInputMessage={this.handleInputMessage}\r\n          handleSendMessage={this.handleSendMessage}\r\n        />\r\n      </ChatWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n  getGlobalState: PropTypes.func.isRequired,\r\n  setGlobalState: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Chat;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport ChatGroupHeader from './Header';\r\nimport ChatGroupBody from './Body';\r\nimport * as libs from '../../lib';\r\n\r\n/* Style-Wrapper */\r\nconst ChatGroupWrapper = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n`;\r\n/* Component */\r\nclass ChatGroup extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { getGlobalState, setGlobalState } = props;\r\n    this.getGlobalState = getGlobalState;\r\n    this.setGlobalState = setGlobalState;\r\n    this.state = {\r\n      chatGroups: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initChatGroups();\r\n  }\r\n\r\n  initChatGroups = async () => {\r\n    try {\r\n      const { currentUser } = await this.getGlobalState();\r\n      const { data: chatGroups } = await libs.apigwClient.invokeAPIGateway({\r\n        path: '/messages/group/search',\r\n        method: 'GET',\r\n        queryParams: { userName: currentUser },\r\n      });\r\n      this.setState(() => ({\r\n        chatGroups,\r\n      }));\r\n    } catch (e) {\r\n      // console.log(e);\r\n    }\r\n  }\r\n\r\n  handleCloseChatGroupPage = async () => {\r\n    await this.setGlobalState({\r\n      currentPage: '/',\r\n    });\r\n  }\r\n\r\n  handleChangeCurrentChatGroup = async (changeGroup) => {\r\n    try {\r\n      // Set Pending State To Start\r\n      await this.setGlobalState({\r\n        isPending: true,\r\n      });\r\n      // Change Message Group Subscribe\r\n      const { currentGroup } = await this.getGlobalState();\r\n      await libs.mqttClient.unsubscribe(currentGroup);\r\n      await libs.mqttClient.subscribe(changeGroup);\r\n      // Update Current Chat Group\r\n      await this.setGlobalState({\r\n        isPending: false,\r\n        currentGroup: changeGroup,\r\n      });\r\n      // Exit Chat Group Page\r\n      await this.handleCloseChatGroupPage();\r\n    } catch (e) {\r\n      // console.log(e);\r\n      global.window.alert(e.message || e);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { chatGroups } = this.state;\r\n    return (\r\n      <ChatGroupWrapper>\r\n        <ChatGroupHeader\r\n          handleClickCloseChatGroupButton={this.handleCloseChatGroupPage}\r\n        />\r\n        <ChatGroupBody\r\n          chatGroups={chatGroups}\r\n          handleClickChatGroup={this.handleChangeCurrentChatGroup}\r\n        />\r\n      </ChatGroupWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nChatGroup.propTypes = {\r\n  getGlobalState: PropTypes.func.isRequired,\r\n  setGlobalState: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ChatGroup;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\n\r\n/* Style-Wrapper */\r\nconst MessageRawWrapper = styled.div`\r\n  padding-left: ${props => (props.isMine ? null : '10px')};\r\n  padding-right: ${props => (props.isMine ? '10px' : null)};\r\n  text-align: ${props => (props.isMine ? 'right' : 'left')};\r\n`;\r\nconst MessageBalloonWrapper = styled.div`\r\n  display: inline-block;\r\n  padding: 10px 12px;\r\n  margin-bottom: 3px;\r\n  max-width: 230px;\r\n  border-radius: 15px;\r\n  border-top-left-radius: ${props => (props.isMine ? null : '3px')};\r\n  border-top-right-radius: ${props => (props.isMine ? '3px' : null)};\r\n  text-align: ${props => (props.isMine ? 'right' : 'left')};\r\n  font-size: 14px;\r\n  white-space: pre-line;\r\n  word-break: break-word;\r\n  word-wrap: break-word;\r\n  background-color: #EEF1F4;\r\n  color: #516378;\r\n`;\r\n/* Component */\r\nconst Message = (props) => {\r\n  const { isMine, content } = props;\r\n  return (\r\n    <MessageRawWrapper isMine={isMine}>\r\n      <MessageBalloonWrapper isMine={isMine}>\r\n        <span>{content}</span>\r\n      </MessageBalloonWrapper>\r\n    </MessageRawWrapper>\r\n  );\r\n};\r\n\r\nMessage.propTypes = {\r\n  isMine: PropTypes.bool.isRequired,\r\n  content: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Message;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\n\r\n/* Style-Wrapper */\r\nconst MoreButtonWrapper = styled.div`\r\n  width: 100%;\r\n  height: 20px;\r\n`;\r\nconst TextButton = styled.span`\r\n  color: rgb(169,169,169);\r\n  cursor: pointer;\r\n`;\r\n/* Component */\r\nconst MoreButton = (props) => {\r\n  const { handleGetOlderMessages } = props;\r\n  return (\r\n    <MoreButtonWrapper>\r\n      <TextButton onClick={() => handleGetOlderMessages()}>\r\n        more\r\n      </TextButton>\r\n    </MoreButtonWrapper>\r\n  );\r\n};\r\n\r\nMoreButton.propTypes = {\r\n  handleGetOlderMessages: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default MoreButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport Message from './Message';\r\nimport MoreButton from './MoreButton';\r\n\r\n/* Style-Wrapper */\r\nconst MessageHistoryWrapper = styled.div`\r\n  width: 100%;\r\n  height: calc(100% - 80px);\r\n  padding: 12px 0px;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  -webkit-overflow-scrolling: touch;\r\n  background-color: #FFFFFF;\r\n  box-sizing: content-box;\r\n  -webkit-box-sizing: content-box;\r\n`;\r\nconst ScrollWrapper = styled.div`\r\n  height: auto;\r\n`;\r\n/* Component */\r\nconst MessageHistory = (props) => {\r\n  const { messages, handleGetOlderMessages, initMessageHistoryScoll } = props;\r\n  return (\r\n    <MessageHistoryWrapper>\r\n      <ScrollWrapper innerRef={el => initMessageHistoryScoll(el)}>\r\n        <MoreButton handleGetOlderMessages={handleGetOlderMessages} />\r\n        {\r\n          messages\r\n            ? messages.map((e, idx) => (\r\n              <Message\r\n                key={(i => `msg-${i}`)(idx)}\r\n                isMine={e.isMine}\r\n                userName={e.userName}\r\n                content={e.content}\r\n                regDate={e.regDate}\r\n              />))\r\n            : 'no-data'\r\n        }\r\n      </ScrollWrapper>\r\n    </MessageHistoryWrapper>\r\n  );\r\n};\r\n\r\nMessageHistory.propTypes = {\r\n  messages: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  initMessageHistoryScoll: PropTypes.func.isRequired,\r\n  handleGetOlderMessages: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default MessageHistory;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\n\r\n/* Style-Wrapper */\r\nconst InputBoxWrapper = styled.textarea`\r\n  height: 19px;\r\n  flex-grow: 1;\r\n  flex-shrink: 1;\r\n  flex-basis: 0;\r\n  font-size: 14px;\r\n  border: none;\r\n  resize: none;\r\n  margin: auto;\r\n  padding: 18px 10px 18px;\r\n  white-space: pre-wrap;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n`;\r\n/* Component */\r\nconst InputBox = (props) => {\r\n  const { messageBuffer, handleChangeInputText } = props;\r\n  return (\r\n    <InputBoxWrapper\r\n      value={messageBuffer}\r\n      onChange={handleChangeInputText}\r\n      placeholder=\"Please Input Here.\"\r\n    />\r\n  );\r\n};\r\n\r\nInputBox.propTypes = {\r\n  messageBuffer: PropTypes.string.isRequired,\r\n  handleChangeInputText: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default InputBox;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\n\r\n/* Style-Wrapper */\r\nconst SendButtonWrapper = styled.div`\r\n  width: 46px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n\r\n  &:before {\r\n    content: '';\r\n    display: block;\r\n    width: 24px;\r\n    height: 24px;\r\n    background-image: url(./img/send-button.png);\r\n    background-size: cover;\r\n    opacity: 0.6;\r\n  }\r\n`;\r\n/* Component */\r\nconst SendButton = (props) => {\r\n  const { handleClickMessageSendButton } = props;\r\n  return <SendButtonWrapper onClick={() => handleClickMessageSendButton()} />;\r\n};\r\n\r\nSendButton.propTypes = {\r\n  handleClickMessageSendButton: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SendButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport InputBox from './InputBox';\r\nimport SendButton from './SendButton';\r\n\r\n/* Style-Wrapper */\r\nconst MessageInputBoxWrapper = styled.div`\r\n  width: 100%;\r\n  height: 56px;\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  border-top: 1px solid rgba(81,99,120,0.2);\r\n  box-sizing: content-box;\r\n  -webkit-box-sizing: content-box;\r\n`;\r\n/* Component */\r\nconst MessageInputBox = (props) => {\r\n  const {\r\n    messageBuffer,\r\n    handleChangeInputText, handleClickMessageSendButton,\r\n  } = props;\r\n  return (\r\n    <MessageInputBoxWrapper>\r\n      <InputBox messageBuffer={messageBuffer} handleChangeInputText={handleChangeInputText} />\r\n      <SendButton handleClickMessageSendButton={handleClickMessageSendButton} />\r\n    </MessageInputBoxWrapper>\r\n  );\r\n};\r\n\r\nMessageInputBox.propTypes = {\r\n  messageBuffer: PropTypes.string.isRequired,\r\n  handleChangeInputText: PropTypes.func.isRequired,\r\n  handleClickMessageSendButton: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default MessageInputBox;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport MessageHistory from './MessageHistory';\r\nimport MessageInputBox from './MessageInputBox';\r\n\r\n/* Style-Wrapper */\r\nconst ChatBodyWrapper = styled.div`\r\n  width: 100%;\r\n  height: calc(100% - 60px);\r\n  overflow: hidden;\r\n`;\r\n/* Component */\r\nconst ChatBody = (props) => {\r\n  const {\r\n    messages, messageBuffer,\r\n    handleInputMessage, handleSendMessage, handleGetOlderMessages, initMessageHistoryScoll,\r\n  } = props;\r\n  return (\r\n    <ChatBodyWrapper>\r\n      <MessageHistory\r\n        messages={messages}\r\n        initMessageHistoryScoll={initMessageHistoryScoll}\r\n        handleGetOlderMessages={handleGetOlderMessages}\r\n      />\r\n      <MessageInputBox\r\n        messageBuffer={messageBuffer}\r\n        handleChangeInputText={handleInputMessage}\r\n        handleClickMessageSendButton={handleSendMessage}\r\n      />\r\n    </ChatBodyWrapper>\r\n  );\r\n};\r\n\r\nChatBody.propTypes = {\r\n  messages: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  messageBuffer: PropTypes.string.isRequired,\r\n  handleInputMessage: PropTypes.func.isRequired,\r\n  handleSendMessage: PropTypes.func.isRequired,\r\n  initMessageHistoryScoll: PropTypes.func.isRequired,\r\n  handleGetOlderMessages: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ChatBody;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\n\r\n/* Style-Wrapper */\r\nconst ChatGroupButtonWrapper = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 56px;\r\n  height: 60px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  \r\n  &:before {\r\n    content: '';\r\n    display: block;\r\n    width: 24px;\r\n    height: 24px;\r\n    background-image: url(./img/config-button.png);\r\n    background-size: cover;\r\n    opacity: 0.6;\r\n  }\r\n`;\r\n/* Component */\r\nconst ChatGroupButton = (props) => {\r\n  const { handleClickOpenChatGroupButton } = props;\r\n  return <ChatGroupButtonWrapper onClick={() => handleClickOpenChatGroupButton()} />;\r\n};\r\n\r\nChatGroupButton.propTypes = {\r\n  handleClickOpenChatGroupButton: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ChatGroupButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\n\r\n/* Style-Wrapper */\r\nconst AppExitButtonWrapper = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 56px;\r\n  height: 60px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  \r\n  &:before {\r\n    content: '';\r\n    display: block;\r\n    width: 24px;\r\n    height: 24px;\r\n    background-image: url(./img/close-button.png);\r\n    background-size: cover;\r\n    opacity: 0.6;\r\n  }\r\n`;\r\n/* Component */\r\nconst AppExitButton = (props) => {\r\n  const { handleClickAppExitButton } = props;\r\n  return <AppExitButtonWrapper onClick={() => handleClickAppExitButton()} />;\r\n};\r\n\r\nAppExitButton.propTypes = {\r\n  handleClickAppExitButton: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default AppExitButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport ChatGroupButton from './ChatGroupButton';\r\nimport AppExitButton from './AppExitButton';\r\n\r\n/* Style-Wrapper */\r\nconst ChatHeaderWrapper = styled.div`\r\n  position: relative;\r\n  height: 60px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-top-left-radius: 12px;\r\n  border-top-right-radius: 12px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: white;\r\n  background-color: #4e66ff;\r\n  box-shadow: 0 1px 2px 0 rgba(47,55,64,0.2);\r\n  overflow: hidden;\r\n  z-index: 2;\r\n  align-items: center;\r\n`;\r\n/* Component */\r\nconst ChatHeader = (props) => {\r\n  const {\r\n    handleClickOpenChatGroupButton,\r\n    handleClickAppExitButton,\r\n  } = props;\r\n  return (\r\n    <ChatHeaderWrapper>\r\n      <ChatGroupButton handleClickOpenChatGroupButton={handleClickOpenChatGroupButton} />\r\n      ChatHeader\r\n      <AppExitButton handleClickAppExitButton={handleClickAppExitButton} />\r\n    </ChatHeaderWrapper>\r\n  );\r\n};\r\n\r\nChatHeader.propTypes = {\r\n  handleClickOpenChatGroupButton: PropTypes.func.isRequired,\r\n  handleClickAppExitButton: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ChatHeader;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\n\r\n/* Style-Wrapper */\r\nconst ChatGroupListItemWrapper = styled.div`\r\n  width: 100%;\r\n  height: 80px;\r\n  padding: 5px;\r\n  overflow: hidden;\r\n  background-color: #FFFFFF;\r\n  border-bottom: 1px solid #E8EBED;\r\n`;\r\nconst GroupName = styled.div`\r\n  width: 100%;\r\n  height: 30px;\r\n  padding: 4px 8px;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  text-align: left;\r\n  border: none;\r\n`;\r\nconst LastMessage = styled.div`\r\n  width: 100%;\r\n  height: calc(100% - 30px);\r\n  padding: 0px 8px;\r\n  font-size: 12px;\r\n  text-align: left;\r\n  border: none;\r\n`;\r\n/* Component */\r\nconst ChatGroupListItem = (props) => {\r\n  const {\r\n    groupName, lastMessage,\r\n    handleClickChatGroup,\r\n  } = props;\r\n  return (\r\n    <ChatGroupListItemWrapper onClick={() => handleClickChatGroup(groupName)}>\r\n      <GroupName>{groupName}</GroupName>\r\n      <LastMessage>{lastMessage.content}</LastMessage>\r\n    </ChatGroupListItemWrapper>\r\n  );\r\n};\r\n\r\nChatGroupListItem.propTypes = {\r\n  groupName: PropTypes.string.isRequired,\r\n  lastMessage: PropTypes.shape({\r\n    userName: PropTypes.string,\r\n    content: PropTypes.string,\r\n    regDate: PropTypes.string,\r\n  }),\r\n  handleClickChatGroup: PropTypes.func.isRequired,\r\n};\r\n\r\nChatGroupListItem.defaultProps = {\r\n  lastMessage: {\r\n    content: '-',\r\n  },\r\n};\r\n\r\nexport default ChatGroupListItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport ChatGroupListItem from './GroupListItem';\r\n\r\n/* Style-Wrapper */\r\nconst ChatGroupListWrapper = styled.div`\r\n  width: 100%;\r\n  height: calc(100% - 60px);\r\n  overflow: hidden;\r\n  background-color: #FFFFFF;\r\n`;\r\n/* Component */\r\nconst ChatGroupList = (props) => {\r\n  const { chatGroups, handleClickChatGroup } = props;\r\n  return (\r\n    <ChatGroupListWrapper>\r\n      {\r\n        chatGroups.map(group => (\r\n          <ChatGroupListItem\r\n            key={group.groupName}\r\n            groupName={group.groupName}\r\n            groupNickName={group.groupnickname}\r\n            lastMessage={group.lastMessage}\r\n            handleClickChatGroup={handleClickChatGroup}\r\n          />))\r\n      }\r\n    </ChatGroupListWrapper>\r\n  );\r\n};\r\n\r\nChatGroupList.propTypes = {\r\n  chatGroups: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  handleClickChatGroup: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ChatGroupList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport ChatGroupList from './GroupList';\r\n\r\n/* Style-Wrapper */\r\nconst ChatGroupBodyWrapper = styled.div`\r\n  width: 100%;\r\n  height: calc(100% - 60px);\r\n  overflow: hidden;\r\n  background-color: #FFFFFF;\r\n`;\r\n/* Component */\r\nconst ChatGroupBody = (props) => {\r\n  const { chatGroups, handleClickChatGroup } = props;\r\n  return (\r\n    <ChatGroupBodyWrapper>\r\n      <ChatGroupList\r\n        chatGroups={chatGroups}\r\n        handleClickChatGroup={handleClickChatGroup}\r\n      />\r\n    </ChatGroupBodyWrapper>\r\n  );\r\n};\r\n\r\nChatGroupBody.propTypes = {\r\n  chatGroups: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  handleClickChatGroup: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ChatGroupBody;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\n\r\n/* Style-Wrapper */\r\nconst CloseButtonWrapper = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  opacity: 0.6;\r\n  font-weight: 600;\r\n  padding: 0 16px;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  max-width: 90px;\r\n`;\r\n/* Component */\r\nconst CloseButton = (props) => {\r\n  const { handleClickCloseChatGroupButton } = props;\r\n  return (\r\n    <CloseButtonWrapper onClick={() => handleClickCloseChatGroupButton()}>\r\n      닫기\r\n    </CloseButtonWrapper>\r\n  );\r\n};\r\n\r\nCloseButton.propTypes = {\r\n  handleClickCloseChatGroupButton: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default CloseButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport CloseButton from './CloseButton';\r\n\r\n/* Style-Wrapper */\r\nconst ChatGroupHeaderWrapper = styled.div`\r\n  position: relative;\r\n  height: 60px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-top-left-radius: 12px;\r\n  border-top-right-radius: 12px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: white;\r\n  background-color: #4e66ff;\r\n  box-shadow: 0 1px 2px 0 rgba(47,55,64,0.2);\r\n  overflow: hidden;\r\n  z-index: 2;\r\n  align-items: center;\r\n`;\r\n/* Component */\r\nconst ChatGroupHeader = (props) => {\r\n  const { handleClickCloseChatGroupButton } = props;\r\n  return (\r\n    <ChatGroupHeaderWrapper>\r\n      <CloseButton handleClickCloseChatGroupButton={() => handleClickCloseChatGroupButton()} />\r\n      ChatGroupHeader\r\n    </ChatGroupHeaderWrapper>\r\n  );\r\n};\r\n\r\nChatGroupHeader.propTypes = {\r\n  handleClickCloseChatGroupButton: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ChatGroupHeader;\r\n","import React from 'react'\r\nimport styled from \"styled-components\";\r\nimport { Loader } from 'semantic-ui-react'\r\n\r\n\r\n/* Style-Wrapper */\r\nconst LoadingCircleWrapper = styled.div`\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    top: 0px;\r\n    left: 0px;\r\n    background: rgba(0,0,0,0.6);\r\n    z-index: 255;\r\n`;\r\n/* Component */\r\nconst LoadingCircle = ()=>{\r\n    return (\r\n        <LoadingCircleWrapper>\r\n            <Loader active />\r\n        </LoadingCircleWrapper>\r\n    );\r\n};\r\nexport default LoadingCircle;","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport ChatSignin from './components/ChatSignin';\r\nimport ChatSignup from './components/ChatSignup';\r\nimport Chat from './components/Chat';\r\nimport ChatGroup from './components/ChatGroup';\r\nimport LoadingCircle from './components/LoadingCircle';\r\n\r\nclass App extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      isPending: false,\r\n      currentPage: '/signin',\r\n    };\r\n  }\r\n\r\n  getGlobalState = () => new Promise(\r\n    resolve => resolve(this.state),\r\n  );\r\n\r\n  setGlobalState = newState => new Promise(\r\n    resolve => this.setState(() => {\r\n      resolve();\r\n      return { ...newState };\r\n    }),\r\n  );\r\n\r\n  render() {\r\n    const { isPending, currentPage } = this.state;\r\n    return (\r\n      <div className=\"App\">\r\n        { isPending && <LoadingCircle /> }\r\n        {(() => {\r\n          switch (currentPage) {\r\n            case '/signin':\r\n              return (\r\n                <ChatSignin\r\n                  key=\"ChatSignin\"\r\n                  setGlobalState={this.setGlobalState}\r\n                  getGlobalState={this.getGlobalState}\r\n                />\r\n              );\r\n            case '/signup':\r\n              return (\r\n                <ChatSignup\r\n                  key=\"ChatSignup\"\r\n                  setGlobalState={this.setGlobalState}\r\n                  getGlobalState={this.getGlobalState}\r\n                />\r\n              );\r\n            case '/group':\r\n              return (\r\n                <ChatGroup\r\n                  key=\"ChatGroup\"\r\n                  setGlobalState={this.setGlobalState}\r\n                  getGlobalState={this.getGlobalState}\r\n                />\r\n              );\r\n            case '/':\r\n              return (\r\n                <Chat\r\n                  key=\"Chat\"\r\n                  setGlobalState={this.setGlobalState}\r\n                  getGlobalState={this.getGlobalState}\r\n                />\r\n              );\r\n            default:\r\n              return <h1>Something is wrong..!</h1>;\r\n          }\r\n        })()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n\r\n              // Execute callback\r\n              if (config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import 'react-app-polyfill/ie11';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}